{% extends "base.html" %}
{% block content %}
<div class="marks-container">
  <h2 class="page-title">Marks</h2>

  <div class="add-mark-form">
    <h3>Add New Mark</h3>
    <form method="post" action="{{ url_for('add_mark') }}">
      <select name="student_id" required>
        <option value="" disabled selected>Select student</option>
        {% for student in students %}
          <option value="{{ student.id }}">{{ student.name }}</option>
        {% endfor %}
      </select>

      <select name="course_id" required>
        <option value="" disabled selected>Select course</option>
        {% for course in courses %}
          <option value="{{ course.id }}">{{ course.title }}</option>
        {% endfor %}
      </select>

      <input type="number" name="mark" placeholder="Mark" min="0" max="100" required>
      <input type="submit" value="Add Mark" class="button-common">
    </form>
  </div>

  <div style="margin-top: 20px; text-align: center;">
    <button id="showMarksBtn" class="button-common">Show Student Marks</button>
    <a href="{{ url_for('download_marks') }}" id="downloadMarksBtn" class="button-common" style="margin-left: 12px;">
      Download Marks Report
    </a>
  </div>

  <div id="marksSection" class="marks-list" style="display: none; margin-top: 15px;">
    {% if marks %}
      <table class="marks-table">
        <thead>
          <tr>
            <th>Student</th>
            <th>Course</th>
            <th>Mark</th>
          </tr>
        </thead>
        <tbody>
          {% for m in marks %}
          <tr>
            <td>{{ m.student.name }}</td>
            <td>{{ m.course.title }}</td>
            <td>{{ m.mark }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="no-marks">No marks yet.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
